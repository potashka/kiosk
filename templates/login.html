<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Вход в систему</title>
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="/static/css/index.css">
</head>
<body>
    <div class="login-container">
        <h2>Вход в систему</h2>
        {% if error_message %}
        <div class="error-message">{{ error_message }}</div>
        {% endif %}
        <form action="/login" method="post">
            <input type="hidden" name="group_id" value="{{group_id}}" />
            <div class="form-group">
                <label for="username">Имя пользователя:</label>
                <input type="text" id="username" name="username" value="{{ username }}" required>
            </div>
            <div class="form-group">
                <label for="password">Пароль:</label>
                <input type="password" id="password" name="password" required>
            </div>
            <div class="form-group">
                <button type="submit">Вход</button>
            </div>
        </form>        
    </div>
    <!-- Добавляем элемент для отображения клавиатуры -->
    <div class="simple-keyboard"></div>

    <!-- Скрипт для работы клавиатуры -->
    <script src="/static/index.js"></script>
    <script>
        const Keyboard = window.SimpleKeyboard.default;

        let currentInput = null;

        // Инициализация клавиатуры
        const keyboard = new Keyboard({
            onChange: input => {
                if (currentInput) {
                    currentInput.value = input;
                }
            },
            onKeyPress: button => onKeyPress(button),
            inputPattern: {
                // Включение всех символов
                default: /./
            },
            layout: {
                default: [
                    "1 2 3 4 5 6 7 8 9 0",
                    "q w e r t y u i o p",
                    "a s d f g h j k l",
                    "z x c v b n m",
                    "{shift} {space} {backspace}"
                ]
            }
        });

        // Привязка клавиатуры к полям ввода
        document.querySelector("#username").addEventListener("focus", () => {
            currentInput = document.querySelector("#username");
            keyboard.setInput(currentInput.value);
        });

        document.querySelector("#password").addEventListener("focus", () => {
            currentInput = document.querySelector("#password");
            keyboard.setInput(currentInput.value);
        });

        function onKeyPress(button) {
            console.log("Button pressed", button);
        }
    </script>
</body>
</html>
